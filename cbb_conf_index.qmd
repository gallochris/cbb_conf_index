---
title: "CBB Conference Index"
format: html
server: shiny
---

```{r setup, include=FALSE, message=FALSE, warning=FALSE}
# Load library because of trouble sorting out cbb_logo_links using namespaces
library(cbbplotR)
```

```{r data-load, warning=FALSE, include=FALSE, message=FALSE, warning=FALSE}
#| context: setup
source(here::here("R/conf_diff_data.R"))

source(here::here("R/conf_net_summary.R"))

source(here::here("R/non_con_net_summary.R"))

# Not including head-to-head charts right now
# source(here::here("R/conf_head_to_head.R"))
```

::: panel-tabset
### Standings
```{r conf-standings}
fluidPage(
  fluidRow(
    column(
      4,
      selectInput(
        'conf',
        'Select a conference',
        choices = c(as.character(unique(conf_margin$conf))),
        selected = "ACC"
      )
    )
  ),
  fluidRow(
    column(
      12,
      gt::gt_output("conf_diff_table")
    )
  )
)
```

### Conference Summary

```{r net-summary}
fluidPage(
  fluidRow(
    column(
      4
      )
    ),
  fluidRow(
    column(
      10,
      gt::gt_output("net_sum_table")
    )
  )
)
```


### Non-Conference Summary

```{r non-con-net-summary}
fluidPage(
  fluidRow(
    column(
      4
      )
    ),
  fluidRow(
    column(
      12,
      gt::gt_output("non_con_net_sum_table")
    )
  )
)
```

### About

Welcome to the college basketball conference index. This project was built by me, [Chris Gallo](https://hellogallo.com). All code is written in R.  

The goal of this project is to share tables of data about the 2023-24 men's college basketball season. This project is built on top of [cbbdata](https://github.com/andreweatherman/cbbdata) and [cbbplotR](https://cbbplotr.aweatherman.com/index.html) both developed by [Andrew Weatherman](https://www.aweatherman.com/). 

There are three types of tables that surface the following data: 

- Conference standings and point differentials by location
- Conference play NET summary
- Non-conference play NET summary

**Standings**

The standings show win/loss records and point differentials by location (home or away). You can filter by any conference to see the specific data. 

The intention is to show the raw point differential in leage play only, so you can quickly grasp the performance of certain teams in conference play only. It also includes the current WAB (wins-above-bubble) at the latest date. 

If you're looking for adjusted efficiency margin, you can check out other data sources like [barttorvik.com](https://barttorvik.com/#) or [kenpom.com](https://kenpom.com/) or [John Gasaway](https://johngasaway.com/).

For more information on WAB, check out [this infographic from Fifth Factor Plots](https://x.com/5th_Factor/status/1634273087829966848?s=20). 

**Conference Play NET Summary**

The Conference Play NET Summary table is a static table that surfaces the home win percentage in **conference** play, the average NET ranking of teams in a single conference, and the percentage of **conference** games played in [each quadrant](https://www.ncaa.com/news/basketball-men/article/2022-12-05/college-basketballs-net-rankings-explained). 

This can be used as a gauge of quadrant opportunities in **conference** play only. For example, ~66 percent of Big 12 games are in the first quadrant. 

**Non-Conference Play NET Summary**

The Non-Conference Play NET Summary table is a static table that surfaces the average NET ranking of teams in a single conference, the quadrant records by conference in **non-conference** play only, and the percentage of **non-conference** games played in [each quadrant](https://www.ncaa.com/news/basketball-men/article/2022-12-05/college-basketballs-net-rankings-explained). 

This can be used to understand quadrant opportunities in **non-conference** play. For example, ~55 percent of Big 12 non-conference games are in the fourth quadrant. 


**Data updates**

The data is updated periodically throughout the day. 

**Thank you**

If you found this useful, please consider sharing it. I also write a data visualization newsletter, [Bless your chart](https://blessyourchart.substack.com/), about college sports. 
:::

```{r shiny-server}
#| context: server
output$conf_diff_table <- gt::render_gt({
    cached_conf_deltas(conf = input$conf)
})


output$net_sum_table <- gt::render_gt({
    by_conf_table
})

output$non_con_net_sum_table <- gt::render_gt({
    by_non_con_table
})

```
